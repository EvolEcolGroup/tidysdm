<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Thin point dataset to have 1 observation per raster cell per time slice — thin_by_cell_time • tidysdm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Thin point dataset to have 1 observation per raster cell per time slice — thin_by_cell_time"><meta name="description" content="This function thins a dataset so that only one observation per cell per time
slice is retained. We use a raster with layers as time slices to define the
data cube on which thinning is enforced (see details below on how time should
be formatted)."><meta property="og:description" content="This function thins a dataset so that only one observation per cell per time
slice is retained. We use a raster with layers as time slices to define the
data cube on which thinning is enforced (see details below on how time should
be formatted)."><meta property="og:image" content="https://evolecolgroup.github.io/tidysdm/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidysdm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a0_tidysdm_overview.html">tidysdm overview</a></li>
    <li><a class="dropdown-item" href="../articles/a1_palaeodata_application.html">Application with palaeodata</a></li>
    <li><a class="dropdown-item" href="../articles/a2_tidymodels_additions.html">Examples of additional tidymodels features</a></li>
    <li><a class="dropdown-item" href="../articles/a3_troubleshooting.html">Troubleshooting models that fail</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EvolEcolGroup/tidysdm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Thin point dataset to have 1 observation per raster cell per time slice</h1>
      <small class="dont-index">Source: <a href="https://github.com/EvolEcolGroup/tidysdm/blob/v1.0.0/R/thin_by_cell_time.R" class="external-link"><code>R/thin_by_cell_time.R</code></a></small>
      <div class="d-none name"><code>thin_by_cell_time.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function thins a dataset so that only one observation per cell per time
slice is retained. We use a raster with layers as time slices to define the
data cube on which thinning is enforced (see details below on how time should
be formatted).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">thin_by_cell_time</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">raster</span>,</span>
<span>  coords <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_col <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  lubridate_fun <span class="op">=</span> <span class="va">c</span>,</span>
<span>  drop_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  agg_fact <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>An <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf</a></code> data frame, or a data frame with coordinate
variables. These can be defined in <code>coords</code>, unless they have standard
names (see details below).</p></dd>


<dt id="arg-raster">raster<a class="anchor" aria-label="anchor" href="#arg-raster"></a></dt>
<dd><p>A <code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> or <code>stars</code> object that defined the grid
with layers corresponding to the time slices (times should be set as either
POSIXlt or "years", see <code><a href="https://rspatial.github.io/terra/reference/time.html" class="external-link">terra::time()</a></code> for details), or a
<code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRasterDataset</a></code> where the first dataset will be used (again,
times for that dataset should be set as either POSIXlt or "years")
<code><a href="https://rspatial.github.io/terra/reference/time.html" class="external-link">terra::time()</a></code></p></dd>


<dt id="arg-coords">coords<a class="anchor" aria-label="anchor" href="#arg-coords"></a></dt>
<dd><p>a vector of length two giving the names of the "x" and "y"
coordinates, as found in <code>data</code>. If left to NULL, the function will try to
guess the columns based on standard names <code>c("x", "y")</code>, <code>c("X","Y")</code>,
<code>c("longitude", "latitude")</code>, or <code>c("lon", "lat")</code></p></dd>


<dt id="arg-time-col">time_col<a class="anchor" aria-label="anchor" href="#arg-time-col"></a></dt>
<dd><p>The name of the column with time; if time is not a lubridate
object, use <code>lubridate_fun</code> to provide a function that can be used to
convert appropriately</p></dd>


<dt id="arg-lubridate-fun">lubridate_fun<a class="anchor" aria-label="anchor" href="#arg-lubridate-fun"></a></dt>
<dd><p>function to convert the time column into a lubridate
object</p></dd>


<dt id="arg-drop-na">drop_na<a class="anchor" aria-label="anchor" href="#arg-drop-na"></a></dt>
<dd><p>boolean on whether locations that are NA in the raster should
be dropped.</p></dd>


<dt id="arg-agg-fact">agg_fact<a class="anchor" aria-label="anchor" href="#arg-agg-fact"></a></dt>
<dd><p>positive integer. Aggregation factor expressed as number of
cells in each direction (horizontally and vertically). Or two integers
(horizontal and vertical aggregation factor) or three integers (when also
aggregating over layers). Defaults to NULL, which implies no aggregation
(i.e. thinning is done on the grid of <code>raster</code>)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf</a></code> or <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code>, the same as "data".</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Further spatial thinning can be achieved by aggregating cells in the raster
before thinning, as achieved by setting <code>agg_fact</code> &gt; 1 (aggregation works in
a manner equivalent to <code><a href="https://rspatial.github.io/terra/reference/aggregate.html" class="external-link">terra::aggregate()</a></code>). Note that if <code>data</code> is an <code>sf</code>
object, the function will transform the coordinates to the same projection as
the <code>raster</code> (recommended); if <code>data</code> is a data.frame, it is up to the user
to ensure that the coordinates are in the correct units.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michela Leonardi, Margherita Colucci, Andrea Vittorio Pozzi, Eleanor M.L. Scerri, Andrea Manica.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

