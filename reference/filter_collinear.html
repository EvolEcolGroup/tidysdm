<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Filter to retain only variables that have low collinearity — filter_collinear • tidysdm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Filter to retain only variables that have low collinearity — filter_collinear"><meta name="description" content="This method finds a subset of variables that have low collinearity. It
provides three methods: cor_caret, a stepwise approach to remove variables
with a pairwise correlation above a given cutoff, choosing the variable with
the greatest mean correlation (based on the algorithm in
caret::findCorrelation); vif_step, a stepwise approach to remove
variables with an variance inflation factor above a given cutoff (based on
the algorithm in usdm::vifstep), and vif_cor, a stepwise approach that,
at each step, find the pair of variables with the highest correlation above
the cutoff and removes the one with the largest vif. such that all have a
correlation below a certain cutoff. There are methods for
terra::SpatRaster, data.frame and matrix. For
terra::SpatRaster and data.frame, only numeric variables will be
considered."><meta property="og:description" content="This method finds a subset of variables that have low collinearity. It
provides three methods: cor_caret, a stepwise approach to remove variables
with a pairwise correlation above a given cutoff, choosing the variable with
the greatest mean correlation (based on the algorithm in
caret::findCorrelation); vif_step, a stepwise approach to remove
variables with an variance inflation factor above a given cutoff (based on
the algorithm in usdm::vifstep), and vif_cor, a stepwise approach that,
at each step, find the pair of variables with the highest correlation above
the cutoff and removes the one with the largest vif. such that all have a
correlation below a certain cutoff. There are methods for
terra::SpatRaster, data.frame and matrix. For
terra::SpatRaster and data.frame, only numeric variables will be
considered."><meta property="og:image" content="https://evolecolgroup.github.io/tidysdm/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidysdm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidysdm.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a1_palaeodata_application.html">Application with palaeodata</a></li>
    <li><a class="dropdown-item" href="../articles/a2_tidymodels_additions.html">Examples of additional tidymodels features</a></li>
    <li><a class="dropdown-item" href="../articles/a3_troubleshooting.html">Troubleshooting models that fail</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EvolEcolGroup/tidysdm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Filter to retain only variables that have low collinearity</h1>
      <small class="dont-index">Source: <a href="https://github.com/EvolEcolGroup/tidysdm/blob/main/R/filter_collinear.R" class="external-link"><code>R/filter_collinear.R</code></a></small>
      <div class="d-none name"><code>filter_collinear.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This method finds a subset of variables that have low collinearity. It
provides three methods: <code>cor_caret</code>, a stepwise approach to remove variables
with a pairwise correlation above a given cutoff, choosing the variable with
the greatest mean correlation (based on the algorithm in
<code>caret::findCorrelation</code>); <code>vif_step</code>, a stepwise approach to remove
variables with an variance inflation factor above a given cutoff (based on
the algorithm in <code>usdm::vifstep</code>), and <code>vif_cor</code>, a stepwise approach that,
at each step, find the pair of variables with the highest correlation above
the cutoff and removes the one with the largest vif. such that all have a
correlation below a certain cutoff. There are methods for
<code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code>, <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> and <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></code>. For
<code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> and <code>data.frame</code>, only numeric variables will be
considered.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_collinear</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  to_keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cor_caret"</span>,</span>
<span>  cor_type <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>  max_cells <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">filter_collinear</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  to_keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cor_caret"</span>,</span>
<span>  cor_type <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>  max_cells <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'stars'</span></span>
<span><span class="fu">filter_collinear</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  to_keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cor_caret"</span>,</span>
<span>  cor_type <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>  max_cells <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  exhaustive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'SpatRaster'</span></span>
<span><span class="fu">filter_collinear</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  to_keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cor_caret"</span>,</span>
<span>  cor_type <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>  max_cells <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  exhaustive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">filter_collinear</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  to_keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cor_caret"</span>,</span>
<span>  cor_type <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>  max_cells <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'matrix'</span></span>
<span><span class="fu">filter_collinear</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  to_keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cor_caret"</span>,</span>
<span>  cor_type <span class="op">=</span> <span class="st">"pearson"</span>,</span>
<span>  max_cells <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> or <code>stars</code> object, a data.frame (with only
numeric variables)</p></dd>


<dt id="arg-cutoff">cutoff<a class="anchor" aria-label="anchor" href="#arg-cutoff"></a></dt>
<dd><p>A numeric value used as a threshold to remove variables. For,
"cor_caret" and "vif_cor", it is the pair-wise absolute correlation cutoff,
which defaults to 0.7. For "vif_step", it is the variable inflation factor,
which defaults to 10</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A boolean whether additional information should be provided on
the screen</p></dd>


<dt id="arg-names">names<a class="anchor" aria-label="anchor" href="#arg-names"></a></dt>
<dd><p>a logical; should the column names be returned <code>TRUE</code> or the
column index <code>FALSE</code>)?</p></dd>


<dt id="arg-to-keep">to_keep<a class="anchor" aria-label="anchor" href="#arg-to-keep"></a></dt>
<dd><p>A vector of variable names that we want to force in the set
(note that the function will return an error if the correlation among any
of those variables is higher than the cutoff).</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>character. One of "cor_caret", "vif_cor" or "vif_step".</p></dd>


<dt id="arg-cor-type">cor_type<a class="anchor" aria-label="anchor" href="#arg-cor-type"></a></dt>
<dd><p>character. For methods that use correlation, which type of
correlation: "pearson", "kendall", or "spearman". Defaults to "pearson"</p></dd>


<dt id="arg-max-cells">max_cells<a class="anchor" aria-label="anchor" href="#arg-max-cells"></a></dt>
<dd><p>positive integer. The maximum number of cells to be used. If
this is smaller than ncell(x), a regular sample of x is used</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments specific to a given object type</p></dd>


<dt id="arg-exhaustive">exhaustive<a class="anchor" aria-label="anchor" href="#arg-exhaustive"></a></dt>
<dd><p>boolean. Used only for <code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> when
downsampling to <code>max_cells</code>, if we require the <code>exhaustive</code> approach in
<code><a href="https://rspatial.github.io/terra/reference/sample.html" class="external-link">terra::spatSample()</a></code>. This is only needed for rasters that are very sparse
and not too large, see the help page of <code><a href="https://rspatial.github.io/terra/reference/sample.html" class="external-link">terra::spatSample()</a></code> for details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector of names of columns that are below the correlation
threshold (when <code>names = TRUE</code>), otherwise a vector of indices. Note
that the indices are only for numeric variables (i.e. if factors are
present, the indices do not take them into account).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Naimi, B., Hamm, N.A.S., Groen, T.A., Skidmore, A.K., and
Toxopeus, A.G. 2014. Where is positional uncertainty a problem for species
distribution modelling?, Ecography 37 (2): 191-203.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>for <code>cor_caret</code>: Original R code by Dong Li, modified by Max Kuhn and
Andrea Manica; for <code>vif_step</code> and <code>vif_cor</code>, original algorithm by Babak
Naimi, rewritten by Andrea Manica for <code>tidysdm</code></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michela Leonardi, Margherita Colucci, Andrea Vittorio Pozzi, Eleanor M.L. Scerri, Andrea Manica.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

